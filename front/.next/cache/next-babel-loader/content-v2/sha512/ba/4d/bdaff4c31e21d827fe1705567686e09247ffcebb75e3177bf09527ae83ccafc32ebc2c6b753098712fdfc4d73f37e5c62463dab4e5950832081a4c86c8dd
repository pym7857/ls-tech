{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\YOUNG\\\\Documents\\\\GitHub\\\\ls-tech\\\\front\\\\pages\\\\write.js\",\n    _s = $RefreshSig$();\n\nimport Head from 'next/head';\nimport React, { useCallback, useState, useEffect } from 'react';\nimport { Form, Input, Button } from 'antd';\nimport { useSelector, useDispatch } from 'react-redux';\nimport marked from 'marked';\nimport DOMPurify from \"dompurify\";\nimport { JSDOM } from 'jsdom';\nimport { ADD_POST_REQUEST } from '../reducers/post';\nimport QuillEditor from '../components/QuillEditor';\nimport styles from '../styles/Home.module.css';\nexport default function Write() {\n  _s();\n\n  var _this = this;\n\n  var dispatch = useDispatch();\n\n  var _useState = useState(''),\n      text = _useState[0],\n      setText = _useState[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.post;\n  }),\n      isAddingPost = _useSelector.isAddingPost,\n      postAdded = _useSelector.postAdded;\n\n  useEffect(function () {\n    if (postAdded) {\n      setText('');\n    }\n  }, [postAdded]);\n  var onSubmitForm = useCallback(function (e) {\n    e.preventDefault();\n\n    if (!text || !text.trim()) {\n      return alert('게시글을 작성하세요.'); // return으로 끊어줘야 밑에부분 실행안됨 \n    }\n\n    console.log(text);\n    dispatch({\n      type: ADD_POST_REQUEST,\n      data: {\n        content: text.trim()\n      }\n    });\n  }, [text]); // useCallback안에서 쓴 state는 여기에 무조건 넣어주어야 한다 \n  // const onChangeText = useCallback((e) => {\n  //   setText(e.target.value);\n  // }, []);\n\n  var PreviewPanel = function PreviewPanel(props) {\n    marked.setOptions({\n      renderer: new marked.Renderer(),\n      gfm: true,\n      breaks: true\n    });\n    var output = DOMPurify.sanitize(marked(props.mdText));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"preview\",\n      dangerouslySetInnerHTML: {\n        __html: output\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, _this);\n  }; //const [body, setBody] = useState('');  // Quill 에디터의 innerHTML을 담는 state\n\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    style: {\n      margin: '10px 0 20px'\n    },\n    encType: \"multipart/form-data\",\n    onSubmit: onSubmitForm,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(Head, {\n        children: [/*#__PURE__*/_jsxDEV(\"title\", {\n          children: \"Quill Sample\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n          rel: \"icon\",\n          href: \"/favicon.ico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n          href: \"//cdn.jsdelivr.net/npm/katex@0.13.3/dist/katex.min.css\",\n          rel: \"stylesheet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"script\", {\n          src: \"//cdn.jsdelivr.net/npm/katex@0.13.3/dist/katex.min.js\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"script\", {\n          src: \"//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.2/build/highlight.min.js\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"script\", {\n          src: \"//cdn.quilljs.com/1.3.6/quill.min.js\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n          rel: \"stylesheet\",\n          href: \"//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.2/build/styles/default.min.css\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n          rel: \"stylesheet\",\n          href: \"//cdn.quilljs.com/1.3.6/quill.snow.css\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.title,\n        children: \"Quill Sample\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '80%',\n          marginTop: '40px'\n        },\n        children: /*#__PURE__*/_jsxDEV(QuillEditor, {\n          body: text,\n          handleQuillChange: setText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '80%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"text state \\uBBF8\\uB9AC\\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), text]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '80%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"preview panel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PreviewPanel, {\n          mdText: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          style: {\n            \"float\": 'right'\n          },\n          htmlType: \"submit\",\n          loading: isAddingPost,\n          children: \"\\uC9F9\\uC9F9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Write, \"ejhGfFokDDAAixZvJvkNL01EXEY=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Write;\n\nvar _c;\n\n$RefreshReg$(_c, \"Write\");","map":{"version":3,"sources":["C:/Users/YOUNG/Documents/GitHub/ls-tech/front/pages/write.js"],"names":["Head","React","useCallback","useState","useEffect","Form","Input","Button","useSelector","useDispatch","marked","DOMPurify","JSDOM","ADD_POST_REQUEST","QuillEditor","styles","Write","dispatch","text","setText","state","post","isAddingPost","postAdded","onSubmitForm","e","preventDefault","trim","alert","console","log","type","data","content","PreviewPanel","props","setOptions","renderer","Renderer","gfm","breaks","output","sanitize","mdText","__html","margin","container","title","width","marginTop"],"mappings":"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","sourcesContent":["import Head from 'next/head';\r\nimport React, { useCallback, useState, useEffect } from 'react';\r\nimport { Form, Input, Button } from 'antd';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport marked from 'marked';\r\nimport DOMPurify from \"dompurify\";\r\nimport { JSDOM } from 'jsdom'\r\n\r\nimport { ADD_POST_REQUEST } from '../reducers/post';\r\nimport QuillEditor from '../components/QuillEditor';\r\nimport styles from '../styles/Home.module.css';\r\n\r\nexport default function Write() {\r\n  const dispatch = useDispatch();\r\n  const [text, setText] = useState('');\r\n  const { isAddingPost, postAdded } = useSelector(state => state.post);\r\n\r\n  useEffect(() => {\r\n    if (postAdded) {\r\n      setText('');\r\n    }\r\n  }, [postAdded]);\r\n\r\n  const onSubmitForm = useCallback((e) => {\r\n    e.preventDefault();\r\n    if (!text || !text.trim()) {\r\n      return alert('게시글을 작성하세요.'); // return으로 끊어줘야 밑에부분 실행안됨 \r\n    }\r\n    console.log(text);\r\n    dispatch({\r\n      type: ADD_POST_REQUEST,\r\n      data: {\r\n        content: text.trim(),\r\n      },\r\n    });\r\n  }, [text]); // useCallback안에서 쓴 state는 여기에 무조건 넣어주어야 한다 \r\n\r\n  // const onChangeText = useCallback((e) => {\r\n  //   setText(e.target.value);\r\n  // }, []);\r\n\r\n  const PreviewPanel = (props) => {\r\n    marked.setOptions({\r\n      renderer: new marked.Renderer(),   \r\n      gfm: true,\r\n      breaks: true,\r\n    });\r\n\r\n    const output = DOMPurify.sanitize(marked(props.mdText));\r\n    return (\r\n      <div id='preview' dangerouslySetInnerHTML=\r\n        {{__html: output}}/>\r\n    )\r\n  }\r\n\r\n  //const [body, setBody] = useState('');  // Quill 에디터의 innerHTML을 담는 state\r\n\r\n  return (\r\n    <Form style={{ margin: '10px 0 20px' }} encType=\"multipart/form-data\" onSubmit={onSubmitForm}>\r\n      <div className={styles.container}>\r\n        <Head>\r\n          <title>Quill Sample</title>\r\n          <link rel=\"icon\" href=\"/favicon.ico\" />\r\n          \r\n          {/* 관련된 리소스 로드 (CSS는 _app.js에서 global CSS로 로드하는 편이 좋을 거 같다.)*/}\r\n          <link href=\"//cdn.jsdelivr.net/npm/katex@0.13.3/dist/katex.min.css\" rel=\"stylesheet\"/>\r\n          <script src=\"//cdn.jsdelivr.net/npm/katex@0.13.3/dist/katex.min.js\"></script>\r\n          <script src=\"//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.2/build/highlight.min.js\"></script>\r\n          <script src=\"//cdn.quilljs.com/1.3.6/quill.min.js\"></script>\r\n          <link rel=\"stylesheet\" href=\"//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.2/build/styles/default.min.css\"/>\r\n          <link rel=\"stylesheet\" href=\"//cdn.quilljs.com/1.3.6/quill.snow.css\"/>\r\n        </Head>\r\n\r\n        <h1 className={styles.title}>\r\n          Quill Sample\r\n        </h1>\r\n\r\n        <div style={{ width: '80%', marginTop: '40px' }}>\r\n          <QuillEditor\r\n            body={text}\r\n            handleQuillChange={setText}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ width: '80%' }}>\r\n          <p>text state 미리보기</p>\r\n          {text}\r\n        </div>\r\n\r\n        <div style={{ width: '80%' }}>\r\n          <p>preview panel</p>\r\n          <PreviewPanel mdText={text}/>\r\n        </div>\r\n\r\n        <div>\r\n          <Button type=\"primary\" style={{ float: 'right' }} htmlType=\"submit\" loading={isAddingPost}>짹짹</Button>\r\n        </div>\r\n      </div>\r\n    </Form>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}